# Лабораторная работа 4: Треугольник Серпинского

## Описание

Программа реализует алгоритм построения фрактала "Треугольник Серпинского" с использованием рекурсивного подхода и библиотеки OpenGL. Демонстрирует работу с рекурсивными алгоритмами в компьютерной графике.

## Основные функции

### `draw_triangle(vertices)`
**Назначение:** Рисует треугольник по заданным вершинам.

**Параметры:**
- `vertices` (numpy.array) - массив из 3 вершин, каждая вершина - массив [x, y]

**Реализация:**
- Использует примитив `GL_TRIANGLES` для отрисовки
- Вершины передаются через `glVertex2fv()`

### `sierpinski(vertices, level)`
**Назначение:** Рекурсивная функция для построения треугольника Серпинского.

**Параметры:**
- `vertices` (numpy.array) - массив из 3 вершин исходного треугольника
- `level` (int) - уровень рекурсии (0 - базовый случай, рисует треугольник)

**Алгоритм:**
1. **Базовый случай:** Если `level == 0`, рисует треугольник
2. **Рекурсивный случай:**
   - Вычисляет середины сторон треугольника:
     - `v12 = (v1 + v2) / 2` - середина между v1 и v2
     - `v23 = (v2 + v3) / 2` - середина между v2 и v3
     - `v31 = (v3 + v1) / 2` - середина между v3 и v1
   - Рекурсивно вызывает себя для трех новых треугольников:
     - `[v1, v12, v31]` - левый треугольник
     - `[v12, v2, v23]` - правый треугольник
     - `[v31, v23, v3]` - нижний треугольник

**Особенности:**
- Каждый уровень рекурсии делит треугольник на 3 меньших треугольника
- Центральный треугольник не рисуется, создавая "дырку"
- Количество треугольников на уровне n: 3^n

### `render()`
**Назначение:** Главная функция цикла отрисовки.

**Выполняет:**
1. Очистку буферов цвета и глубины
2. Сброс матрицы моделирования
3. Установку ортогональной проекции
4. Определение начальных вершин треугольника
5. Вызов функции `sierpinski()` с уровнем рекурсии 5
6. Обновление буферов окна

## Структура программы

### Инициализация
- Создание окна GLFW 800x600 пикселей
- Установка контекста OpenGL

### Начальные параметры
- **Вершины исходного треугольника:**
  - `[-0.5, -0.5]` - левая нижняя
  - `[0.5, -0.5]` - правая нижняя
  - `[0.0, 0.5]` - верхняя
- **Уровень рекурсии:** 5

### Основной цикл
- Непрерывный рендеринг фрактала
- Обработка событий окна

## Как запустить

1. Установите зависимости:
   ```bash
   pip install glfw PyOpenGL numpy
   ```
2. Запустите программу:
   ```bash
   python lab4.py
   ```

## Зависимости

- `glfw` - библиотека для создания окон
- `OpenGL.GL` - основные функции OpenGL
- `OpenGL.GLUT` - утилиты OpenGL
- `numpy` - для работы с массивами вершин

## Особенности реализации

### Рекурсивный алгоритм
- Использует классический рекурсивный подход построения фрактала
- Базовый случай - отрисовка треугольника
- Рекурсивный случай - деление на подтреугольники

### Геометрия
- Исходный треугольник расположен в центре экрана
- Используется ортогональная проекция для 2D-отображения
- Координаты в диапазоне [-1, 1]

### Визуализация
- Белые треугольники на черном фоне
- Чем выше уровень рекурсии, тем детальнее фрактал
- При уровне 5 создается 243 треугольника (3^5)

## Математические основы

Треугольник Серпинского - классический пример фрактала:
- **Фрактальная размерность:** log(3)/log(2) ≈ 1.585
- **Площадь:** стремится к 0 при бесконечной рекурсии
- **Периметр:** стремится к бесконечности

## Изменение параметров

Для изменения детализации фрактала измените значение `level` в функции `render()`:
```python
level = 5  # Увеличьте для большей детализации
```

**Примечание:** Высокие уровни рекурсии (>7) могут замедлить отрисовку.

