# Лабораторная работа 7: Моделирование робота в OpenGL

## Описание

Программа создает трехмерную модель робота, состоящую из простых геометрических примитивов: сферы (голова), куба (тело) и цилиндров (руки и ноги). Реализовано интерактивное управление вращением модели с помощью клавиатуры.

## Основные функции

### `draw_cube(size, color)`
**Назначение:** Рисует куб с заданным размером и цветом.

**Параметры:**
- `size` (float) - размер ребра куба
- `color` (tuple) - цвет в формате (R, G, B) в диапазоне 0.0-1.0

**Реализация:**
- Использует примитив `GL_QUADS` для отрисовки 6 граней
- Каждая грань состоит из 4 вершин
- Грани: передняя, задняя, верхняя, нижняя, левая, правая

**Использование:** Тело робота (зеленый куб 1x1x1)

### `draw_sphere(radius, color)`
**Назначение:** Рисует сферу с заданным радиусом и цветом.

**Параметры:**
- `radius` (float) - радиус сферы
- `color` (tuple) - цвет сферы

**Реализация:**
- Использует `gluNewQuadric()` для создания квадрики
- `gluSphere()` для отрисовки сферы (32 сегмента по широте и долготе)
- `gluDeleteQuadric()` для освобождения ресурсов

**Использование:** Голова робота (красная сфера радиусом 0.5)

### `draw_cylinder(radius, height, color)`
**Назначение:** Рисует цилиндр с заданными параметрами.

**Параметры:**
- `radius` (float) - радиус основания цилиндра
- `height` (float) - высота цилиндра
- `color` (tuple) - цвет цилиндра

**Реализация:**
- Использует `gluCylinder()` для отрисовки
- 32 сегмента для окружности и высоты
- Требует предварительного поворота для правильной ориентации

**Использование:** Руки и ноги робота

### `draw_robot()`
**Назначение:** Главная функция для отрисовки всей модели робота.

**Структура робота:**
1. **Голова** (красная сфера):
   - Позиция: (0, 1.5, 0) - над телом
   - Радиус: 0.5

2. **Тело** (зеленый куб):
   - Позиция: (0, 0.5, 0) - центр модели
   - Размер: 1.0x1.0x1.0

3. **Левая рука** (синий цилиндр):
   - Позиция: (-1.0, 0.5, 0)
   - Поворот: -90° вокруг оси Y
   - Радиус: 0.2, высота: 1.0

4. **Правая рука** (синий цилиндр):
   - Позиция: (1.0, 0.5, 0)
   - Поворот: 90° вокруг оси Y
   - Радиус: 0.2, высота: 1.0

5. **Левая нога** (желтый цилиндр):
   - Позиция: (-0.5, -0.5, 0)
   - Поворот: 90° вокруг оси X
   - Радиус: 0.2, высота: 1.0

6. **Правая нога** (желтый цилиндр):
   - Позиция: (0.5, -0.5, 0)
   - Поворот: 90° вокруг оси X
   - Радиус: 0.2, высота: 1.0

**Особенности:**
- Использует `glPushMatrix()` и `glPopMatrix()` для сохранения/восстановления матриц трансформации
- Каждая часть робота рисуется в своей системе координат
- `glTranslatef()` для позиционирования
- `glRotatef()` для ориентации

### `render()`
**Назначение:** Главная функция цикла отрисовки.

**Выполняет:**
1. Очистку буферов цвета и глубины
2. Сброс матрицы моделирования
3. Установку перспективной проекции (45°, соотношение 800/600)
4. Смещение камеры назад (glTranslatef(0, 0, -5))
5. Применение вращений по осям X, Y, Z
6. Вызов `draw_robot()` для отрисовки модели
7. Обновление буферов окна

### `key_callback(window, key, scancode, action, mods)`
**Назначение:** Обработчик событий клавиатуры для управления вращением.

**Управление:**
- **Стрелка ВВЕРХ (↑)** - вращение вокруг оси X на +5°
- **Стрелка ВНИЗ (↓)** - вращение вокруг оси X на -5°
- **Стрелка ВЛЕВО (←)** - вращение вокруг оси Y на +5°
- **Стрелка ВПРАВО (→)** - вращение вокруг оси Y на -5°
- **Клавиша Q** - вращение вокруг оси Z на +5°
- **Клавиша W** - вращение вокруг оси Z на -5°

**Реализация:**
- Использует `glfw.set_key_callback()` для регистрации обработчика
- Обновляет глобальные переменные `angle_x`, `angle_y`, `angle_z`
- Изменения применяются в следующем кадре рендеринга

## Структура программы

### Инициализация
- Создание окна GLFW 800x600
- Установка контекста OpenGL
- Регистрация обработчика клавиатуры

### Глобальные переменные
- `angle_x`, `angle_y`, `angle_z` - углы поворота модели

### Основной цикл
- Непрерывный рендеринг с обработкой событий
- Применение вращений к модели
- Обновление экрана

## Как запустить

1. Установите зависимости:
   ```bash
   pip install glfw PyOpenGL numpy
   ```
2. Запустите программу:
   ```bash
   python lab7.py
   ```

## Зависимости

- `glfw` - библиотека для создания окон и обработки событий
- `OpenGL.GL` - основные функции OpenGL
- `OpenGL.GLU` - утилиты OpenGL (gluSphere, gluCylinder, gluPerspective)
- `numpy` - для работы с массивами

## Управление

- **↑ / ↓** - вращение вокруг оси X
- **← / →** - вращение вокруг оси Y
- **Q / W** - вращение вокруг оси Z
- **Закрытие окна** - выход из программы

## Особенности реализации

### Трехмерное моделирование
- Использование иерархии трансформаций
- Сохранение/восстановление матриц для независимых частей
- Комбинирование примитивов для создания сложной модели

### Интерактивность
- Управление с клавиатуры для плавного вращения
- Независимое вращение по трем осям
- Накопительный эффект (углы суммируются)

### Визуализация
- Перспективная проекция для реалистичного отображения
- Цветовое кодирование частей робота:
  - Красный - голова
  - Зеленый - тело
  - Синий - руки
  - Желтый - ноги

## Геометрия модели

### Размеры
- **Голова:** Радиус 0.5
- **Тело:** Куб 1.0x1.0x1.0
- **Руки/ноги:** Цилиндры радиусом 0.2, высотой 1.0

### Позиционирование
- Центр модели в точке (0, 0, 0)
- Голова на высоте 1.5 единиц
- Руки на высоте 0.5 единиц, разнесены на ±1.0
- Ноги на высоте -0.5 единиц, разнесены на ±0.5

## Матрицы трансформации

Программа использует стек матриц OpenGL:
- `glPushMatrix()` - сохраняет текущую матрицу
- `glTranslatef()` - применяет смещение
- `glRotatef()` - применяет поворот
- `glPopMatrix()` - восстанавливает предыдущую матрицу

Это позволяет каждой части робота иметь независимые трансформации.

